<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Weather  App</title>
  <!-- <link rel="stylesheet" href="style.css"> -->
   <style>
    :root{
  --bg:#0b0f2f;
  --panel:#12142b;
  --muted:rgba(255,255,255,0.7);
  --card:#111428;
  --accent:#4b4ff0;
  --accent-2:#5b4ff7;
}


*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(180deg,#07081a 0%, #0f1630 100%);
  color:#fff;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}


.site-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px 28px;
  background:transparent;
}
.brand{display:flex;align-items:center;gap:10px}
.app-name{font-weight:700}
.header-controls{display:flex;align-items:center;gap:12px}
.units-toggle select{
  background:rgba(255,255,255,0.06);
  color:#fff;
  border:0;
  padding:8px 10px;
  border-radius:8px;
}

/* Page title + search */
.page{
  width:100%;
  max-width:1200px;
  margin:0 auto;
  padding:12px 20px 60px;
}
.page-title{
  text-align:center;
  font-size:32px;
  margin:6px 0 22px;
  font-weight:700;
}
.search-row{
  display:flex;
  justify-content:center;
  gap:12px;
  margin-bottom:22px;
}
.search-input{
  width:480px;
  max-width:70%;
  padding:14px 16px;
  border-radius:12px;
  border:0;
  background:rgba(255,255,255,0.04);
  color:#fff;
  outline:none;
}
.btn-primary{
  background:var(--accent);
  border:0;
  color:#fff;
  padding:12px 18px;
  border-radius:10px;
  cursor:pointer;
}


.content-grid{
  display:grid;
  grid-template-columns: 1fr;
  gap:20px;
  align-items:start;
  padding:10px 8px;
}


.left-column{display:flex;flex-direction:column;gap:18px}


.main-card{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  background:linear-gradient(135deg,#4b4ff0 0%, #2f2b6b 100%);
  border-radius:14px;
  padding:22px;
  box-shadow: 0 6px 30px rgba(17,18,46,0.6);
}
.main-card-left h2{font-size:20px;margin-bottom:6px}
.muted{opacity:0.85;font-size:13px}
.small-desc{opacity:0.9;font-size:14px;margin-top:6px}
.main-card-right{display:flex;flex-direction:column;align-items:center;gap:6px}
.main-card-right img{width:84px;height:84px}
.big-temp{font-size:44px;font-weight:700}


.stats-row{
  display:flex;
  gap:14px;
  flex-wrap:wrap;
}
.stat-card{
  background: rgba(255,255,255,0.03);
  padding:14px;
  border-radius:12px;
  min-width:110px;
  flex:1;
  max-width:220px;
}
.stat-label{opacity:0.85;font-size:13px;margin-bottom:6px}
.stat-value{font-weight:600;font-size:18px}


.daily-section .section-title{margin:6px 0 10px}
.daily-cards{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.daily-card{
  background: rgba(255,255,255,0.03);
  width:90px;
  border-radius:10px;
  padding:10px;
  text-align:center;
  cursor:pointer;
}
.daily-card .day{font-size:13px;opacity:0.9;margin-bottom:6px}
.daily-card .icon{font-size:20px;margin-bottom:6px}
.daily-card .temps{font-size:13px;opacity:0.9}


.right-column{display:flex;flex-direction:column;gap:14px}
.hourly-panel{
  background: rgba(255,255,255,0.03);
  padding:16px;
  border-radius:12px;
  min-width:260px;
}
.hourly-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.hourly-header h3{margin:0}
.hourly-controls select{
  border:0;background:rgba(255,255,255,0.04);color:#fff;padding:8px;border-radius:8px;
}
.hourly-list{display:flex;flex-direction:column;gap:10px;max-height:520px;overflow-y:auto;padding-right:6px}
.hour-row{
  display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02)
}
.hour-row .left{display:flex;align-items:center;gap:8px}
.hour-row img{width:28px;height:28px}
.hour-row .time{opacity:0.9}
.hour-row .temp{font-weight:600}


.page-footer{text-align:center;padding:20px 0 80px;color:rgba(255,255,255,0.6)}


@media(min-width:1000px){
  .content-grid{
    grid-template-columns: 2fr 360px;
    align-items:start;
  }
  .search-input{width:500px;max-width:520px}
  .daily-cards{flex-wrap:nowrap;overflow-x:auto;padding-bottom:6px}
}

@media(max-width:600px){
  .page-title{font-size:20px}
  .search-input{width:calc(100% - 140px)}
  .main-card{padding:16px}
  .main-card-right img{width:64px;height:64px}
  .big-temp{font-size:34px}
  .stat-card{min-width:140px}
  .daily-card{width:72px;padding:8px}
  .hourly-panel{min-width:auto}
  .right-column{order:3}
  .daily-section{order:2}
}

.sun-times {
  display: flex;
  justify-content: space-between;
  color: #f9fafb;
  font-size: 14px;
  margin-top: 10px;
}


select {
  background-color: #1e1e3f;
  color: #fff; 
  border: 1px solid #444; 
  border-radius: 8px; 
  padding: 6px 10px;
}

select option {
  background-color: #1e1e3f; 
  color: #fff;
}

/* Chatbot container */
#chatbot-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 9999;
  font-family: 'Poppins', sans-serif;
}

/* Floating icon */
#chatbot-icon {
  background: linear-gradient(135deg, #1e1e3f, #1e1e3f); /* blue → purple */
  color: white;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
  cursor: pointer;
  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

#chatbot-icon:hover {
  transform: scale(1.1);
  box-shadow: 0 8px 25px rgba(99, 102, 241, 0.6);
}

/* Chat window */
#chatbot-window {
  display: none;
  position: absolute;
  bottom: 80px;
  right: 0;
  width: 350px;
  height: 480px;
  background: #101225;
  border-radius: 18px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border: 1px solid rgba(255, 255, 255, 0.08);
}

/* Message area */
#chatbot-messages {
  flex: 1;
  padding: 15px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
  /* background: #1e1e3f; */
  background: white;
}

/* Message bubbles */
.chatbot-message {
  max-width: 80%;
  padding: 10px 14px;
  border-radius: 12px;
  font-size: 14px;
  line-height: 1.5;
  word-wrap: break-word;
}

/* Bot messages */
.chatbot-message.bot {
  background-color: rgba(255, 255, 255, 0.08);
  color: #1e1e3f;
  align-self: flex-start;
  border-bottom-left-radius: 0;
}

/* User messages */
.chatbot-message.user {
  background: linear-gradient(135deg, #3b82f6, #6366f1);
  color: #fff;
  align-self: flex-end;
  border-bottom-right-radius: 0;
}

/* Input area */
#chatbot-window > div:last-child {
  display: flex;
  align-items: center;
  background: #f9fafb; /* Light bar for contrast */
  padding: 10px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

/* Input field */
#chatbot-input {
  flex: 1;
  border: none;
  outline: none;
  background: transparent;
  color: #111;
  font-size: 14px;
  padding: 10px;
  border-radius: 8px;
}

#chatbot-input::placeholder {
  color: #777;
}

/* Send button */
#chatbot-send {
  background: linear-gradient(135deg, #3b82f6, #6366f1);
  color: white;
  border: none;
  padding: 10px 18px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  transition: background 0.2s ease-in-out, transform 0.1s ease-in-out;
}

#chatbot-send:hover {
  background: linear-gradient(135deg, #2563eb, #4f46e5);
  transform: translateY(-2px);
}

/* Scrollbar styling */
#chatbot-messages::-webkit-scrollbar {
  width: 6px;
}
#chatbot-messages::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

/* Responsive */
@media (max-width: 480px) {
  #chatbot-window {
    width: 90vw;
    height: 70vh;
    right: 5vw;
  }
}

/* Make messages appear in separate rows */
#chatbot-messages {
  display: flex;
  flex-direction: column; /* stack messages vertically */
  gap: 10px; /* add space between each */
}

/* Ensure messages don't sit side-by-side */
.chatbot-message {
  display: inline-block;
  max-width: 80%;
  padding: 10px 14px;
  border-radius: 12px;
  font-size: 14px;
  line-height: 1.5;
  word-wrap: break-word;
}

/* Bot messages — aligned left */
.chatbot-message.bot {
  align-self: flex-start;
  text-align: left;
  background-color: #1e1e3f;
  color: #e5e7eb;
  border-bottom-left-radius: 0;
}

/* User messages — aligned right */
.chatbot-message.user {
  align-self: flex-end;
  text-align: right;
  background: linear-gradient(135deg, #3b82f6, #6366f1);
  color: #fff;
  border-bottom-right-radius: 0;
}

/* ✅ Fix background overlay on mobile view */
@media (max-width: 768px) {
  body,
  .forecast-container,
  .hourly-container,
  .main-container {
    background: #0b1120 !important; /* Use your main app background color */
    background-image: none !important;
    box-shadow: none !important;
  }
}
   </style>
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <img src="" alt="" class="logo" aria-hidden="true" />
      <span class="app-name">Weather Now</span>
    </div>

    <div class="header-controls">
      <div class="units-toggle">
        <select id="unitSelect" aria-label="Choose units">
          <option value="metric">°C</option>
          <option value="imperial">°F</option>
        </select>
      </div>
    </div>
  </header>

  <main class="page">
    <h1 class="page-title">How's the sky looking today?</h1>

    <div class="search-row">
      <input id="cityInput" class="search-input" type="text" placeholder="Search for a place..." />
      <button id="searchBtn" class="btn-primary">Search</button>
    </div>

    <section class="content-grid">
      <!-- Left column (main card + details + daily) -->
      <div class="left-column">
        <article class="main-card" id="mainCard">
          <div class="main-card-left">
            <h2 id="cityName">Loading...</h2>
            <p id="dateText" class="muted">—</p>
            <div class="small-desc" id="descText">—</div>
          </div>
          <div class="main-card-right">
            <img id="weatherIcon" src="" alt="weather icon" />
            <div id="tempText" class="big-temp">--°</div>
          </div>
        </article>

        <div class="sun-times">
  <p id="sunriseText">🌅 --:--</p>
  <p id="sunsetText">🌇 --:--</p>
</div>


        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-label">Feels Like</div>
            <div id="feelsText" class="stat-value">--</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Humidity</div>
            <div id="humidityText" class="stat-value">--</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Wind</div>
            <div id="windText" class="stat-value">--</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Precipitation</div>
            <div id="precipText" class="stat-value">--</div>
          </div>
        </div>


        <section class="daily-section">
          <h3 class="section-title">Daily forecast</h3>
          <div id="dailyCards" class="daily-cards" aria-live="polite">
            <!-- JS inserts daily cards here (7) -->
          </div>
        </section>
      </div>

      <!-- Right column (hourly + day selector) -->
      <aside class="right-column">
        <div class="hourly-panel">
          <div class="hourly-header">
            <h3>Hourly forecast</h3>
            <div class="hourly-controls">
              <select id="daySelect" aria-label="Select day"></select>
            </div>
          </div>

          <div id="hourlyList" class="hourly-list" aria-live="polite">
            <!-- JS inserts hourly rows here -->
          </div>
        </div>
      </aside>
    </section>

  </main>

  <footer class="page-footer">
    <small>Data from OpenWeatherMap</small>
  </footer>

  <script>
    const API_KEY = "1c258ee49ca8c8ecb7230904408d0817";

const unitSelect = document.getElementById("unitSelect");
const cityInput = document.getElementById("cityInput");
const searchBtn = document.getElementById("searchBtn");

const cityName = document.getElementById("cityName");
const dateText = document.getElementById("dateText");
const descText = document.getElementById("descText");
const tempText = document.getElementById("tempText");
const weatherIcon = document.getElementById("weatherIcon");

const feelsText = document.getElementById("feelsText");
const humidityText = document.getElementById("humidityText");
const windText = document.getElementById("windText");
const precipText = document.getElementById("precipText");

const dailyCards = document.getElementById("dailyCards");
const daySelect = document.getElementById("daySelect");
const hourlyList = document.getElementById("hourlyList");

let currentUnit = unitSelect.value || "metric";
let forecastData = null;
let availableDays = [];

function toLocalDate(ts, tzOffsetSeconds = 0) {
  return new Date((ts + tzOffsetSeconds) * 1000);
}
function weekdayName(dateObj) {
  return dateObj.toLocaleDateString(undefined, { weekday: "short" });
}
function hourLabel(dateObj) {
  return dateObj.getHours() + ":00";
}
function iconUrl(icon) {
  return `https://openweathermap.org/img/wn/${icon}@2x.png`;
}

function groupForecastByDay(list, tzOffsetSeconds = 0) {
  const map = {};
  list.forEach(item => {
    const d = toLocalDate(item.dt, tzOffsetSeconds);
    const key = d.getDay();
    if (!map[key]) map[key] = [];
    map[key].push(item);
  });

  Object.keys(map).forEach(k => {
    map[k].sort((a, b) => a.dt - b.dt);
  });
  return map;
}

function getDailySummary(map, tzOffsetSeconds = 0) {
  const todayIdx = toLocalDate(Math.floor(Date.now() / 1000), tzOffsetSeconds).getDay();
  const days = [];
  for (let i = 0; i < 7; i++) {
    const idx = (todayIdx + i) % 7;
    if (map[idx]) {
      const temps = map[idx].map(it => it.main.temp);
      const min = Math.min(...temps);
      const max = Math.max(...temps);
      const mid = map[idx][Math.floor(map[idx].length / 2)];
      days.push({
        dayIndex: idx,
        label: weekdayName(toLocalDate(mid.dt, tzOffsetSeconds)),
        min: Math.round(min),
        max: Math.round(max),
        icon: mid.weather[0].icon
      });
    }
  }
  return days;
}

function renderMainCard(cityObj, firstEntry) {
  const tz = cityObj.timezone || 0;
  cityName.textContent = `${cityObj.name}, ${cityObj.country}`;
  dateText.textContent = toLocalDate(firstEntry.dt, tz).toLocaleString(undefined, { weekday: 'long', month: 'short', day: 'numeric', year: 'numeric' });
  descText.textContent = firstEntry.weather[0].description;
  tempText.textContent = `${Math.round(firstEntry.main.temp)}°${currentUnit === 'metric' ? 'C' : 'F'}`;
  weatherIcon.src = iconUrl(firstEntry.weather[0].icon);

  feelsText.textContent = `${Math.round(firstEntry.main.feels_like)}°`;
  humidityText.textContent = `${firstEntry.main.humidity}%`;
  windText.textContent = `${Math.round(firstEntry.wind.speed)} ${currentUnit === 'metric' ? 'm/s' : 'mph'}`;
  const precipAmt = (firstEntry.rain && firstEntry.rain["3h"]) || (firstEntry.snow && firstEntry.snow["3h"]) || 0;
  precipText.textContent = `${precipAmt} mm`;

  // 🌅 Sunrise & Sunset
  const sunrise = new Date(cityObj.sunrise * 1000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  const sunset = new Date(cityObj.sunset * 1000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  document.getElementById("sunriseText").textContent = `🌅 ${sunrise}`;
  document.getElementById("sunsetText").textContent = `🌇 ${sunset}`;
}

function renderDailyCards(summaries) {
  dailyCards.innerHTML = "";
  summaries.forEach(s => {
    const div = document.createElement("div");
    div.className = "daily-card";
    div.dataset.dayIndex = s.dayIndex;
    div.innerHTML = `
      <div class="day">${s.label}</div>
      <div class="icon"><img src="${iconUrl(s.icon)}" width="36" height="36" alt=""></div>
      <div class="temps">${s.max}° / ${s.min}°</div>
    `;
    div.addEventListener("click", () => {
      daySelect.value = s.dayIndex;
      renderHourly(s.dayIndex);
      document.querySelectorAll('.daily-card').forEach(c => c.classList.remove('active'));
      div.classList.add('active');
    });
    dailyCards.appendChild(div);
  });
}

function populateDaySelect(summaries) {
  daySelect.innerHTML = "";
  summaries.forEach(s => {
    const opt = document.createElement("option");
    opt.value = s.dayIndex;
    opt.textContent = s.label;
    daySelect.appendChild(opt);
  });
  if (summaries.length) {
    daySelect.value = summaries[0].dayIndex;
  }
}

function renderHourly(dayIndex) {
  if (!forecastData) return;
  const items = forecastData[dayIndex] || [];
  hourlyList.innerHTML = "";
  if (!items.length) {
    hourlyList.innerHTML = `<div class="hour-row">No hourly data for this day</div>`;
    return;
  }

  items.forEach(it => {
    const d = toLocalDate(it.dt, forecastTimezone);
    const row = document.createElement("div");
    row.className = "hour-row";
    row.innerHTML = `
      <div class="left"><div class="time">${hourLabel(d)}</div></div>
      <div class="center"><img src="${iconUrl(it.weather[0].icon)}" alt="" /></div>
      <div class="temp">${Math.round(it.main.temp)}°</div>
    `;
    hourlyList.appendChild(row);
  });
}

/* ---------- API + flow ---------- */
let forecastTimezone = 0;

async function fetchForecastByCoords(lat, lon, unit = 'metric') {
  const url = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&units=${unit}&appid=${API_KEY}`;
  const res = await fetch(url);
  if (!res.ok) throw new Error("Failed to fetch forecast");
  return res.json();
}

async function fetchForecastByCity(city, unit = 'metric') {
  const url = `https://api.openweathermap.org/data/2.5/forecast?q=${encodeURIComponent(city)}&units=${unit}&appid=${API_KEY}`;
  const res = await fetch(url);
  if (!res.ok) throw new Error("City not found");
  return res.json();
}

async function loadForecast(data) {
  if (!data || !data.city || !data.list) return;
  forecastTimezone = data.city.timezone || 0;
  forecastData = groupForecastByDay(data.list, forecastTimezone);
  const summaries = getDailySummary(forecastData, forecastTimezone);
  availableDays = summaries.map(s => s.dayIndex);

  renderMainCard(data.city, data.list[0]);
  renderDailyCards(summaries);
  populateDaySelect(summaries);

  const defaultDay = summaries.length ? summaries[0].dayIndex : toLocalDate(Math.floor(Date.now() / 1000), forecastTimezone).getDay();
  renderHourly(defaultDay);
  document.querySelectorAll('.daily-card').forEach(c => c.classList.remove('active'));
  const selCard = document.querySelector(`.daily-card[data-day-index="${defaultDay}"]`) || document.querySelector('.daily-card');
  if (selCard) selCard.classList.add('active');
}

/* ---------- events ---------- */
searchBtn.addEventListener('click', async () => {
  const val = cityInput.value.trim();
  if (!val) return;
  try {
    const data = await fetchForecastByCity(val, currentUnit);
    await loadForecast(data);
  } catch (e) {
    alert('City not found or API error');
    console.error(e);
  }
});

unitSelect.addEventListener('change', async () => {
  currentUnit = unitSelect.value;
  const cityText = cityName.textContent.split(',')[0];
  try {
    if (cityText && cityText !== "Loading...") {
      const data = await fetchForecastByCity(cityText, currentUnit);
      await loadForecast(data);
    } else {
      await initByGeolocation();
    }
  } catch (e) {
    console.error(e);
  }
});

daySelect.addEventListener('change', () => {
  const idx = parseInt(daySelect.value, 10);
  renderHourly(idx);
  document.querySelectorAll('.daily-card').forEach(c => c.classList.remove('active'));
  const clicked = document.querySelector(`.daily-card[data-day-index="${idx}"]`);
  if (clicked) clicked.classList.add('active');
});

/* ---------- geolocation ---------- */
async function initByGeolocation() {
  if (!navigator.geolocation) {
    try {
      const data = await fetchForecastByCity('Berlin', currentUnit);
      await loadForecast(data);
    } catch (e) { console.error(e); }
    return;
  }

  navigator.geolocation.getCurrentPosition(async (pos) => {
    try {
      const { latitude, longitude } = pos.coords;
      const data = await fetchForecastByCoords(latitude, longitude, currentUnit);
      await loadForecast(data);
    } catch (e) { console.error(e); }
  }, async () => {
    try {
      const data = await fetchForecastByCity('Berlin', currentUnit);
      await loadForecast(data);
    } catch (e) { console.error(e); }
  }, { maximumAge: 600000, timeout: 10000 });
}

/* ---------- start ---------- */
window.addEventListener('load', () => {
  currentUnit = unitSelect.value || 'metric';
  initByGeolocation();
});

/* ---------- Chatbot ---------- */
document.addEventListener("DOMContentLoaded", () => {
  const chatbotIcon = document.getElementById("chatbot-icon");
  const chatbotWindow = document.getElementById("chatbot-window");
  const chatbotMessages = document.getElementById("chatbot-messages");
  const chatbotInput = document.getElementById("chatbot-input");
  const chatbotSend = document.getElementById("chatbot-send");

  chatbotIcon.addEventListener("click", () => {
    chatbotWindow.style.display = chatbotWindow.style.display === "none" ? "block" : "none";
  });

  chatbotSend.addEventListener("click", sendMessage);
  chatbotInput.addEventListener("keypress", (e) => {
    if (e.key === "Enter") sendMessage();
  });

  function appendMessage(sender, text) {
    const messageDiv = document.createElement("div");
    messageDiv.classList.add("chatbot-message");
    messageDiv.classList.add(sender === "You" ? "user" : "bot");
    messageDiv.innerHTML = `<p>${text}</p>`;
    chatbotMessages.appendChild(messageDiv);
    chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
  }

  async function sendMessage() {
    const userMessage = chatbotInput.value.trim();
    if (!userMessage) return;

    appendMessage("You", userMessage);
    chatbotInput.value = "";

    const botReply = await generateBotReply(userMessage);
    appendMessage("Weather Assistance", botReply);
  }
});

async function generateBotReply(message) {
  const cityMatch = message.match(/in\s([a-zA-Z\s]+)/i);
  const city = cityMatch ? cityMatch[1].trim() : null;

  if (message.toLowerCase().includes("what should i wear")) {
    return "If it's sunny, wear light clothes. If it's raining, grab a jacket 🌦️";
  }

  if (city) {
    try {
      const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`;
      const res = await fetch(url);
      const data = await res.json();

      if (data.cod !== 200) return `Sorry, I couldn't find weather info for ${city}.`;

      const desc = data.weather[0].description;
      const temp = data.main.temp;

      if (temp > 30) return `It's ${temp}°C and ${desc} in ${city}. Stay cool and hydrated 😎`;
      if (temp < 15) return `It's ${temp}°C and ${desc} in ${city}. You should wear something warm 🧥`;
      return `In ${city}, it's ${temp}°C with ${desc}. A light outfit should do fine 👕`;
    } catch {
      return "Sorry, I had trouble fetching the weather data.";
    }
  }

  return "Ask me about the weather! For example: 'What's the weather in Berlin?'";
}

  </script>

  <!-- Chatbot -->
<div id="chatbot-container" style="position: fixed; bottom: 20px; right: 20px;">
  <div id="chatbot-icon" 
       style="background-color: #007bff; color: white; border-radius: 50%; 
              width: 60px; height: 60px; display: flex; align-items: center; 
              justify-content: center; font-size: 24px; cursor: pointer;">
    💬
  </div>

  <div id="chatbot-window" 
       style="display: none; position: absolute; bottom: 80px; right: 0; 
              width: 300px; height: 400px; background: #fff; border-radius: 10px; 
              box-shadow: 0 2px 10px rgba(0,0,0,0.2); overflow: hidden;">

    <div id="chatbot-messages" 
         style="height: 340px; overflow-y: auto; padding: 10px; font-size: 14px;"></div>

    <div style="display: flex; border-top: 1px solid #ddd;">
      <input id="chatbot-input" type="text" 
             placeholder="Ask me the weather..." 
             style="flex: 1; border: none; padding: 10px; outline: none;">
      <button id="chatbot-send" 
              style="background-color: #007bff; color: white; border: none; 
                     padding: 10px; cursor: pointer;">Send</button>
    </div>
  </div>
</div>

</body>
</html>
